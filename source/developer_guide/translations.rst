翻訳
============

.. _update-translations:

どうすればKanboardに新しい翻訳を追加できますか？
--------------------------------------------

-  翻訳ファイルは ``app/Locale`` ディレクトリ以下にあります。
-  この中にはフランス語なら ``fr_FR``、イタリア語なら ``it_IT`` といったように、言語ごとのサブディレクトリがあります。
-  翻訳ファイルはPHPのファイルで、キーと値のペアの配列を返します。
-  キーは英語で書かれたオリジナルのテキストで、値は対応する言語への訳文です。
-  **フランス語の翻訳ファイルは常に最新です**
-  常に最新バージョン (master ブランチ)を使用してください。

新しく翻訳ファイルを作成する:

1. 新しくディレクトリを作成する: ``app/Locale/xx_XX`` 
例えば、 ``app/Locale/fr_CA`` はカナダフランス語です。
2. 新しく翻訳ファイルを作成する: ``app/Locale/xx_XX/translations.php``
3. フランス語のロケールの内容を使用した上で、値を置き換える
4. ``app/Model/Language.php`` ファイルを更新する
5. ローカルにインストールしたKanboardで全て問題が無いか確認する
6. `Githubにプルリクエストを送る <https://help.github.com/articles/using-pull-requests/>`__

既にある翻訳を更新するにはどうすれば良いですか?
--------------------------------------

1. 翻訳ファイルを開く: ``app/Locale/xx_XX/translations.php``
3. 未翻訳部分は``//`` でコメントアウトされて値が空なので、その部分を翻訳してコメントアウトを解除する。
3. ローカルにインストールしたKanboardで確認し、`Githubにプルリクエストを送る <https://help.github.com/articles/using-pull-requests/>`__


新しい翻訳文をアプリケーションに追加するにはどうすれば良いですか？
--------------------------------------------------

翻訳文はソースコード中の以下の関数で表示されます。

-  ``t()``: HTMLエスケープ有りで、テキストを表示する
-  ``e()``: HTMLエスケープ無しで、テキストを表示する

ソースコード中では、常に英語版が使用されます。

テキストの文字列は ``sprintf()`` 関数で要素が置き換えられます:

-  ``%s`` は文字列(string)の置き換えに使用されます。
-  ``%d`` は整数(integer)の置き換えに使用されます。

利用可能な全てのフォーマットについては `PHP のドキュメンテーション <http://php.net/sprintf>`__ を参照してください。

アプリケーション内で未翻訳箇所を見つけるにはどうすれば良いですか？
-----------------------------------------------------

ターミナルから、以下のコマンドを実行してください:

.. code:: bash

    ./cli locale:compare

全ての未翻訳箇所と、未使用の翻訳箇所が画面上に表示されます。
フランス語ロケールと他のロケールを同期させます(後述)。

翻訳ファイルを同期するには？
-------------------------------------

Unix のシェルで以下のコマンドを実行してください:

.. code:: bash

    ./cli locale:sync

フランス語翻訳が他のロケールからの参照に使用されます。
